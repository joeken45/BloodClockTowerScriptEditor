<Window x:Class="BloodClockTowerScriptEditor.Views.EditScriptMetaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="編輯劇本資訊"
        Height="700" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 編輯區域 -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel>
                <TextBlock Text="編輯劇本資訊" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                <!-- 第一行: 劇本名稱 + 作者 (標籤和輸入框同行) -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="15"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <DockPanel Grid.Column="0">
                        <TextBlock Text="劇本名稱:" FontWeight="SemiBold" DockPanel.Dock="Left" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="txtName" Padding="6" VerticalAlignment="Center"/>
                    </DockPanel>

                    <DockPanel Grid.Column="2">
                        <TextBlock Text="作者:" FontWeight="SemiBold" DockPanel.Dock="Left" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="txtAuthor" Padding="6" VerticalAlignment="Center"/>
                    </DockPanel>
                </Grid>

                <!-- 第二行: Logo 網址 (上) + Logo 預覽 (下) -->
                <StackPanel Margin="0,0,0,10">
                    <DockPanel Margin="0,0,0,3">
                        <TextBlock Text="Logo 網址:" FontWeight="SemiBold" DockPanel.Dock="Left" 
                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="txtLogo" Padding="6" VerticalAlignment="Center"/>
                    </DockPanel>

                    <TextBlock Text="Logo 圖片:" FontWeight="SemiBold" Margin="0,8,0,5"/>
                    <Border BorderBrush="#CCC" BorderThickness="1" Background="White" 
            Height="100" HorizontalAlignment="Left" Width="200">
                        <Image x:Name="imgLogo" Stretch="Uniform" Margin="4"/>
                    </Border>
                </StackPanel>

                <!-- 狀態列表標題 + 按鈕 -->
                <Grid Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="狀態列表 [集石]:" FontWeight="SemiBold" VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="➕ 新增" Padding="8,4" Margin="0,0,8,0"
                                Click="AddStatus_Click"
                                Background="#4CAF50" Foreground="White" BorderThickness="0"/>

                        <Button Content="❌ 刪除已勾選" Padding="8,4"
                                Click="DeleteSelectedStatus_Click"
                                Background="#F44336" Foreground="White" BorderThickness="0"/>
                    </StackPanel>
                </Grid>

                <!-- 狀態列表 -->
                <ItemsControl x:Name="statusList" Margin="0,0,0,20">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#DDD" BorderThickness="1" Padding="10" Margin="0,0,0,8" Background="White">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <!-- 勾選框 -->
                                        <ColumnDefinition Width="10"/>
                                        <ColumnDefinition Width="2*"/>
                                        <!-- 名稱 -->
                                        <ColumnDefinition Width="15"/>
                                        <ColumnDefinition Width="3*"/>
                                        <!-- 說明 -->
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" VerticalAlignment="Top" Margin="0,8,0,0"/>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="名稱:" FontSize="11" Foreground="#666"/>
                                        <TextBox Text="{Binding Name}" Margin="0,2,0,0" Padding="5"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="4">
                                        <TextBlock Text="說明:" FontSize="11" Foreground="#666"/>
                                        <TextBox Text="{Binding Skill}" Margin="0,2,0,0" Padding="5"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="60"
                                                 VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- 🆕 BOTC 進階設定 -->
                <TextBlock Text="BOTC 進階設定" FontWeight="SemiBold" FontSize="13" Margin="0,15,0,8"/>

                <!-- HideTitle -->
                <CheckBox x:Name="chkHideTitle" Content="隱藏標題" Margin="0,0,0,10"/>

                <!-- Background URL -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="背景圖片 URL:" FontWeight="SemiBold" DockPanel.Dock="Left" 
                               VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox x:Name="txtBackground" Padding="6" VerticalAlignment="Center"/>
                </DockPanel>

                <!-- Almanac URL -->
                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="說明書連結:" FontWeight="SemiBold" DockPanel.Dock="Left" 
                               VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox x:Name="txtAlmanac" Padding="6" VerticalAlignment="Center"/>
                </DockPanel>

                <!-- 提示文字 -->
                <TextBlock Text="註：Bootlegger、首夜順序、其他夜晚順序的編輯功能將於後續版本實作"
                           FontSize="10" Foreground="#999" Margin="0,5,0,0"/>
            </StackPanel>
        </ScrollViewer>

        <!-- 底部按鈕 -->
        <Border Grid.Row="1" Background="#F5F5F5" BorderBrush="#DDD" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,15">
                <Button Content="確定" Padding="20,8" Margin="0,0,10,0"
                        Click="OK_Click" IsDefault="True"
                        Background="#2196F3" Foreground="White" BorderThickness="0"/>
                <Button Content="取消" Padding="20,8"
                        Click="Cancel_Click" IsCancel="True"
                        Background="#999" Foreground="White" BorderThickness="0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
