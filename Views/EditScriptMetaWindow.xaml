<Window x:Class="BloodClockTowerScriptEditor.Views.EditScriptMetaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="編輯劇本資訊"
        Height="750" Width="650"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 編輯區域 -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel>
                <!-- 標題 -->
                <TextBlock Text="編輯劇本資訊" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                <!-- ========== 基本資訊區 ========== -->
                <TextBlock Text="基本資訊" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>

                <!-- 劇本名稱 + 作者 -->
                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="15"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="劇本名稱:" FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="txtName" Padding="6" 
                             VerticalAlignment="Center"/>

                    <TextBlock Grid.Column="3" Text="作者:" FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    <TextBox Grid.Column="4" x:Name="txtAuthor" Padding="6" 
                             VerticalAlignment="Center"/>
                </Grid>

                <!-- Logo URL -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Logo URL:" FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="txtLogo" Padding="6" 
                             VerticalAlignment="Center"/>
                </Grid>

                <!-- Logo 預覽 -->
                <Border BorderBrush="#CCC" BorderThickness="1" Background="White" 
                        Height="100" Width="200" HorizontalAlignment="Left" Margin="0,0,0,12">
                    <Image x:Name="imgLogo" Stretch="Uniform" Margin="4"/>
                </Border>

                <Border BorderBrush="#DDD" BorderThickness="0,0,0,1" Margin="0,8,0,15"/>

                <!-- ========== 狀態列表 [集石] ========== -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="狀態列表 [集石]" 
                               FontWeight="SemiBold" FontSize="14" 
                               VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="➕ 新增" Padding="10,5" Margin="0,0,8,0"
                                Click="AddStatus_Click"
                                Background="#4CAF50" Foreground="White" BorderThickness="0"/>

                        <Button Content="🗑️ 刪除已勾選" Padding="10,5"
                                Click="DeleteSelectedStatus_Click"
                                Background="#F44336" Foreground="White" BorderThickness="0"/>
                    </StackPanel>
                </Grid>

                <!-- 狀態列表 -->
                <ItemsControl x:Name="statusList" Margin="0,0,0,15">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#DDD" BorderThickness="1" Padding="10" 
                                    Margin="0,0,0,8" Background="White">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="30"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="15"/>
                                        <ColumnDefinition Width="1.5*"/>
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" 
                                              VerticalAlignment="Top" Margin="0,8,0,0"/>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="名稱:" FontSize="11" Foreground="#666"/>
                                        <TextBox Text="{Binding Name}" Margin="0,2,0,0" Padding="5"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="3">
                                        <TextBlock Text="說明:" FontSize="11" Foreground="#666"/>
                                        <TextBox Text="{Binding Skill}" Margin="0,2,0,0" Padding="5"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="60"
                                                 VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Border BorderBrush="#DDD" BorderThickness="0,0,0,1" Margin="0,0,0,15"/>

                <!-- ========== BOTC 進階設定 ========== -->
                <TextBlock Text="BOTC 進階設定" FontWeight="SemiBold" FontSize="14" 
                           Margin="0,0,0,10"/>

                <!-- HideTitle -->
                <CheckBox x:Name="chkHideTitle" Content="隱藏標題" Margin="0,0,0,12"/>

                <!-- 背景圖片 URL -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="背景圖片 URL:" FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="txtBackground" Padding="6" 
                             VerticalAlignment="Center"/>
                </Grid>

                <!-- 背景圖片預覽 -->
                <Border BorderBrush="#CCC" BorderThickness="1" Background="White" 
                        Height="100" Width="200" HorizontalAlignment="Left" Margin="0,0,0,12">
                    <Image x:Name="imgBackground" Stretch="Uniform" Margin="4"/>
                </Border>

                <!-- 說明書連結 -->
                <Grid Margin="0,0,0,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="說明書連結:" FontWeight="SemiBold" 
                               VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="txtAlmanac" Padding="6" 
                             VerticalAlignment="Center"/>
                </Grid>

                <!-- 提示文字 -->
                <TextBlock Text="註：Bootlegger、首夜順序、其他夜晚順序的編輯功能將於後續版本實作"
                           FontSize="10" Foreground="#999" Margin="0,5,0,0" 
                           TextWrapping="Wrap"/>
            </StackPanel>
        </ScrollViewer>

        <!-- 底部按鈕 -->
        <Border Grid.Row="1" Background="#F5F5F5" BorderBrush="#DDD" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,15">
                <Button Content="確定" Padding="20,8" Margin="0,0,10,0"
                        Click="OK_Click" IsDefault="True"
                        Background="#2196F3" Foreground="White" BorderThickness="0"/>
                <Button Content="取消" Padding="20,8"
                        Click="Cancel_Click" IsCancel="True"
                        Background="#999" Foreground="White" BorderThickness="0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
